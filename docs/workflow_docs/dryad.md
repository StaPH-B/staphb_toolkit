---
title: 'Dryad'
layout: page
---

# Dryad v2.0.0
[Dryad](https://github.com/k-florek/dryad/) - a pipeline to construct reference free core-genome or SNP phylogenetic trees for examining prokaryote relatedness in outbreaks. Dryad accomplishes this using [NextFlow](https://www.nextflow.io/) allowing the pipeline to be run in numerous environments using [docker](https://www.docker.com/) or [singularity](https://sylabs.io/) either locally or in an HPC or cloud environment. Dryad will perform both a reference free core-genome analysis based off of the approach outlined by [Oakeson et. al](https://www.ncbi.nlm.nih.gov/pubmed/30158193) and/or a SNP analysis using the [CFSAN-SNP](https://snp-pipeline.readthedocs.io/en/latest/readme.html) pipeline.

## Data workflow:
![Dryad pipeline](/assets/workflows/dryad/dryad_workflow_2.0.0.png)

## Quality Checks
Dryad performs a number of quality control steps including trimming, removing sequencing adapters, and removing contaminating phiX sequences. The workflow also performs a number of quality checks on the both the sequencing reads and the assembly quality.

## Additional workflow parameters
In order to tweak the versions of software used or specific workflow parameters. You can access the configuration files in the [repository](). You can use the custom configuration with the `--profile` flag.


## Quick Start:

````
$ staphb-wf dryad <input_dir> -o <output_dir> -r <reference sequence>
````
Where `<input_dir>` is the path to an input directory containing paired-end fastq read data.
The `<output_dir>` is where the results will be written to and `<reference sequence>` is the reference sequence for SNP calling.

## Output files:
**core_genome_tree.tree** - The core-genome phylogenetic tree created by the core-genome pipeline.  
**ar_predictions.tsv** - Antibiotic tesistance genes detected.  
**ar_predictions_binary.tsv** - Presence/absence matrix of antibiotic resistance genes.  
**{sample}.mash.txt** - Species prediction for each sample.  
**mlst.tsv** - MLST scheme predictions.  
**snp_tree.tree** - The SNP tree created by the SNP pipeline.  
**snp_distance_matrix.tsv** - The SNP distances generated by the SNP pipeline.  
**multiqc_report.html** - QC report.

## Docker Images
The base NextFlow configuration profiles (Docker, Singularity, and AWS) incorporate the following StaPH-B Docker Images:

| Dryad Process   | Function  | Docker Image  | Comment |
|---|---|---|---|---|
| preProcess  | Renames input read files for downstream processing | staphb/fastqc_container  | Light-weight container for quick text processing  |
| fastqc | Performs QC check on reads | staphb/fastqc:0.11.8 |
| trim | Trims reads based on quality | staphb/trimmomatic:0.39 |
| cleanreads | Remove PhiX and sequencing adapters | staphb/bbtools:38.76 |
| cfsan | CFSAN SNP Pipeline | staphb/cfsan-snp-pipeline:2.0.2 |
| snp_tree | Construct SNP tree | staphb/iqtree:1.6.7 |
| shovill | De novo assembly | staphb/shovill:1.0.4 |
| quast | QC of sequence assemblies | staphb/quast:5.0.2 |
| prokka | Annotation of assemblies | staphb/prokka:1.14.5 |
| amrfinder | Detection of AR genes | staphb/ncbi-amrfinderplus:3.1.1b |
| amrfinder_summary | Summary of detected AR genes | wslhbio/amrfinder-parser:1.0 |
| roary | Alignment of core-genomes | staphb/roary:3.12.0 |
| cg_tree | Construct CG-tree | staphb/iqtree:1.6.7 |
| multiqc | QC report | staphb/multiqc:1.8 |
| mash | Determination of Species | staphb/mash:2.1 |
| mlst | MLST typing | staphb/mlst:2.17.6-cv1 |


## Version History

Latest Release: ![Latest Release](https://img.shields.io/github/v/release/k-florek/dryad)

Version [2.0.0](https://github.com/k-florek/dryad/releases/tag/v2.0.0)
1. Redesigned workflow for nextflow
2. Added phiX removal and adapter trimming with BBtools
3. Added read and assembly QC checks with FastQC, QUAST, and MultiQC
4. Added AR detection using AMRFinderPlus
5. Added MLST typing
6. Added Species id using MASH

Version [1.1](https://github.com/k-florek/dryad/releases/tag/v1.1)
1. Added the ability to run both SNP and core-genome pipelines in sucession

Version [1.0](https://github.com/k-florek/dryad/releases/tag/v1.0)
Inital Release

## Authors
[Kelsey R Florek](https://github.com/k-florek), WSLH Bioinformatics Scientist  
[Abigail Shockey](https://github.com/AbigailShockey), WSLH Bioinformatics Fellow
