//#####################
//####Docker Params####
//#####################
//docker.enabled = true
//docker.runOptions = ""

//####################
//#Singularity Params#
//####################
//singularity.enabled = true
//singularity.runOptions = ""

//####################
//##AWS Batch Params##
//####################
//aws.batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
//aws.region = 'us-east-1'
//workDir = 's3://'
//cleanup=true

//#########################
//####Docker Containers####
//#########################
trimmomatic_container = 'staphb/trimmomatic:0.39'
mash_container = 'staphb/mash:2.1'
seroba_container = 'staphb/seroba:1.0.2'
seqyclean_container = 'staphb/seqyclean:1.10.09'
shovill_container = 'staphb/shovill:1.0.4'
quast_container = 'staphb/quast:5.0.2'
lyveset_container = 'staphb/lyveset:1.1.4f'
emmtype_finder_container = 'staphb/emm-typing-tool:0.0.1'
seqsero_container = 'staphb/seqsero:1.0.1'
serotypefinder_container = 'staphb/serotypefinder:1.1'
ksnp3_container = 'staphb/ksnp3:3.1'
snp_dists_container = 'staphb/snp-dists:0.6.2'


//#####################
//###Pipeline Params###
//#####################
//PreProcessing
params.name_split_on="_"

//Mash
params.mash_db= "/db/RefSeqSketchesDefaults.msh"

//SeqyClean
params.min_read_length = "25"
params.contaminants = "/Adapters_plus_PhiX_174.fasta"
params.quality_trimming = "-qual"

//Emmtyper
//Use default database within docker image
params.emmtyper_db = "/db"

//ksnp3
params.kmer_length = "19"
params.kmer_snps = "-core"


process {
  //stageInMode = "link" //uncomment for singularity

  //executor = 'awsbatch' //uncomment for AWS Batch
  //queue = '' //uncomment for AWS Batch

  cpus = 2
  memory = '2 GB'

  withName:preProcess{
    cpus = 2
    memory = '2 GB'
    container = fastqc_container
  }
  withName:seqyclean{
    cpus = 8
    memory = '16 GB'
    container = seqyclean_container
  }
  withName:ivar{
    cpus = 4
    memory = '8 GB'
    container = ivar_container
  }
  withName:samtools{
    cpus = 2
    memory = '2 GB'
    container = samtools_container
  }
  withName:alignment_results{
    cpus = 2
    memory = '2 GB'
    container = tiptoft_container
  }
  withName:snp_matrix{
    cpus = 2
    memory = '2 GB'
    container = snp_dists_container
  }
  withName:msa{
    cpus = 8
    memory = '64 GB'
    container = mafft_container
  }
  withName:vcf{
    cpus = 2
    memory = '2 GB'
    container = snp_sites_container
  }
  withName:snp_frequency{
    cpus = 4
    memory = '2 GB'
    container = tiptoft_container
  }
  withName:iqtree{
    cpus = 31
    memory = '15 GB'
    container = iqtree_container
  }
}
